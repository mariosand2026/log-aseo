<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LOG ¬∑ Artificial Intelligence</title>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
  body{
    margin:0;
    background:#000;
    color:#fff;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  }

  header{
    text-align:center;
    padding:20px 10px;
  }

  header h1{
    margin:0;
    font-weight:300;
    letter-spacing:2px;
  }

  header small{
    display:block;
    opacity:.6;
    margin-top:4px;
  }

  .container{
    max-width:420px;
    margin:auto;
    padding:10px;
  }

  textarea, input, select, button{
    width:100%;
    background:#111;
    border:1px solid #222;
    color:#fff;
    padding:10px;
    border-radius:6px;
    margin-bottom:8px;
    font-size:14px;
  }

  button{
    cursor:pointer;
    background:#fff;
    color:#000;
    font-weight:600;
  }

  button.secondary{
    background:#111;
    color:#fff;
    border:1px solid #333;
  }

  .calendar{
    display:grid;
    grid-template-columns: repeat(7,1fr);
    gap:4px;
    margin-top:10px;
  }

  .day{
    background:#111;
    border:1px solid #222;
    min-height:80px;
    padding:4px;
    font-size:11px;
  }

  .day strong{
    display:block;
    opacity:.6;
    margin-bottom:2px;
  }

  .empty{
    background:transparent;
    border:none;
  }

  .task{
    font-size:10px;
    margin-top:2px;
    opacity:.85;
  }

  footer{
    text-align:center;
    font-size:11px;
    opacity:.4;
    padding:15px 0 25px;
  }
</style>
</head>

<body>

<header>
  <h1>LOG</h1>
  <small>Artificial Intelligence</small>
</header>

<div class="container">

  <!-- CONFIGURACI√ìN -->
  <textarea id="members" rows="4" placeholder="Integrantes (uno por l√≠nea)"></textarea>

  <input type="text" class="task-name" placeholder="Actividad (ej: Barrer)" />
  <select class="task-freq">
    <option value="diaria">Diaria</option>
    <option value="semanal8">Cada 8 d√≠as</option>
    <option value="quincenal">Quincenal</option>
    <option value="mensual">Mensual</option>
  </select>

  <input type="number" id="month" placeholder="Mes (0-11)" />
  <input type="number" id="year" placeholder="A√±o" />

  <button onclick="generateCalendar()">Generar calendario</button>
  <button class="secondary" onclick="generatePDF()">Generar PDF</button>

  <!-- CALENDARIO -->
  <div id="calendarDays" class="calendar"></div>

</div>

<footer>
  by Mario Andr√©s Narv√°ez Delgado
</footer>

<script>
const icons = {
  diaria:"üßΩ",
  semanal8:"üåÄ",
  quincenal:"üåì",
  mensual:"üìÖ"
};

let calendarData = [];

function generateCalendar(){
  calendarData = [];

  const members = document.getElementById('members').value
    .split('\n').map(x=>x.trim()).filter(Boolean);

  const taskName = document.querySelector('.task-name').value.trim();
  const taskFreq = document.querySelector('.task-freq').value;

  if(!members.length || !taskName) return;

  const month = +document.getElementById('month').value;
  const year  = +document.getElementById('year').value;

  const daysInMonth = new Date(year, month+1, 0).getDate();
  const firstDay = new Date(year, month, 1).getDay();
  const offset = firstDay === 0 ? 6 : firstDay - 1;

  const cal = document.getElementById('calendarDays');
  cal.innerHTML='';

  let idx = Math.floor(Math.random()*members.length);

  for(let i=0;i<offset;i++){
    const e=document.createElement('div');
    e.className='day empty';
    cal.appendChild(e);
  }

  for(let d=1; d<=daysInMonth; d++){
    const cell=document.createElement('div');
    cell.className='day';
    cell.innerHTML=`<strong>${d}</strong>`;

    const show =
      taskFreq==='diaria' ||
      (taskFreq==='semanal8' && (d-1)%8===0) ||
      (taskFreq==='quincenal' && (d===1||d===15)) ||
      (taskFreq==='mensual' && d===1);

    if(show){
      const text=`${icons[taskFreq]} ${taskName} ‚Äì ${members[idx]}`;
      const div=document.createElement('div');
      div.className='task';
      div.textContent=text;
      cell.appendChild(div);

      calendarData.push({day:d,text});
      idx=(idx+1)%members.length;
    }

    cal.appendChild(cell);
  }
}

function generatePDF(){
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();

  pdf.setFontSize(14);
  pdf.text("Calendario de Aseo", 14, 15);

  pdf.setFontSize(10);
  let y = 25;

  calendarData.forEach(d=>{
    pdf.text(`D√≠a ${d.day}: ${d.text}`, 14, y);
    y+=6;
    if(y>280){ pdf.addPage(); y=20; }
  });

  pdf.save("calendario_aseo.pdf");
}
</script>

</body>
</html>
